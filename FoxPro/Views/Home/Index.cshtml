 <!-- Task Modal -->
<div class="modal fade" id="taskModal" tabindex="-1" role="dialog" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="taskModalLabel">Task Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <div class="form-group">
                        <label for="taskName">Task Name</label>
                        <input type="text" class="form-control" id="taskName" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea class="form-control" id="taskDescription" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="saveTask()">Save Task</button>
            </div>
        </div>
    </div>
</div>


<section>
    <div id="taskContextMenu" class="context-menu">
        <ul>
            <li id="openTask">Open Task</li>
            <li id="editTask">Edit Task</li>
            <li id="printTask">Print Task</li>
            <li id="deleteTask">Delete Task</li>
        </ul>
    </div>

    <div class="container mt-3">
        <h2>Task List</h2>
        <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#taskModal">Add Task</button>
    </div>

    <!-- Placeholder for Task Display -->
    <div id="taskList">
        <!-- Tasks would be dynamically loaded here -->
        <div class="container mt-2">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Task</th>
                        <th scope="col">Description</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="taskTable">
                    <!-- Tasks will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>
    <script>


        function saveTask() {
            var taskName = document.getElementById('taskName').value;
            var taskDescription = document.getElementById('taskDescription').value;
            // Add task to table
            var table = document.getElementById('taskTable');
            var row = table.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            cell1.innerHTML = table.rows.length;
            cell2.innerHTML = taskName;
            cell3.innerHTML = taskDescription;
            cell4.innerHTML = '<button class="btn btn-info" onclick="editTask(this)">Edit</button> ' +
                '<button class="btn btn-danger" onclick="deleteTask(this)">Delete</button>';
            // Clear inputs
            $('#taskModal').modal('hide');
            document.getElementById('taskForm').reset();
        }

        function editTask(button) {
            var row = button.parentNode.parentNode;
            var taskName = row.cells[1].innerHTML;
            document.getElementById('taskName').value = taskName;
            $('#taskModal').modal('show');
            // Save changes
            $('#taskModal').one('hide.bs.modal', function () {
                row.cells[1].innerHTML = document.getElementById('taskName').value;
            });
        }

        function deleteTask(button) {
            if (confirm('Are you sure you want to delete this task?')) {
                var row = button.parentNode.parentNode;
                row.parentNode.removeChild(row);
            }
        }



        $(document).ready(function () {
            var $contextMenu = $('#taskContextMenu');

            // Simulate a right-click on a task to show the context menu
            $(document).on("contextmenu", "#taskList", function (e) {
                e.preventDefault();
                $contextMenu.css({
                    display: "block",
                    left: e.pageX,
                    top: e.pageY
                });
            });

            // Hide context menu on click elsewhere
            $(document).on("click", function () {
                $contextMenu.hide();
            });

            // Task operations
            $('#openTask').click(function () {
                alert('Open Task clicked');
                $contextMenu.hide();
            });

            $('#editTask').click(function () {
                alert('Edit Task clicked');
                $contextMenu.hide();
            });

            $('#printTask').click(function () {
                alert('Print Task clicked');
                $contextMenu.hide();
            });

            $('#deleteTask').click(function () {
                if (confirm('Are you sure you want to delete this task?')) {
                    alert('Task deleted');
                }
                $contextMenu.hide();
            });
        });

    </script>
</section>